<html>
<head>
  <title>课程讲解 --- Oracle中ROWNUM（分页）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 14pt;
    }
  </style>
</head>
<body>
<a name="2411"/>
<h1>课程讲解 --- Oracle中ROWNUM（分页）</h1>

<div>
<span><div>1 rownum</div><div>       1 在 Oracle 中 ROWNUM 是一个伪列 ，</div><div>         rownum是在得到结果集的时候产生的，用于标记结果集中结果顺序的一个字段，这个字段称为伪数列，也就是事实上不存在这么一个数列。</div><div>         它的特点是按顺序标记，而且是逐次递加的。</div><div><br/></div><div>       2 只有有结果记录时，ROWNUM才有相应数据，</div><div><br/></div><div><br/></div><div>   eg 1 演示 rownum 伪列的特点</div><div><br/></div><div>         select ROWNUM , ACC.* from ADMIN02.&quot;ACCOUNT&quot;  acc;</div><div><br/></div><div>        -- 会多出一列，它的值是根据结果集的行逐次递加的。</div><div><br/></div><div><br/></div><div>   eg2 通过 rownum 查询 第一条记录</div><div>         select  * from ADMIN02.&quot;ACCOUNT&quot;  where  rownum =1;</div><div><br/></div><div>        </div><div>         1 ROWNUM是伪列，必须要要有返回结果后，每条返回记录就会对应产生一个ROWNUM数值；</div><div><br/></div><div>         2 返回结果记录的ROWNUM是从1开始排序的，因此第一条始终是1;</div><div><br/></div><div><br/></div><div>    eg3 （不能对ROWNUM使用&gt;（大于1的数值）、&gt;=（大于或等于1的数值）、=（大于或等于1的数值），否则无结果）</div><div><br/></div><div align="left" style="min-height: 10pt;"><div style="margin-left:80px;"><span style="font-size: 10pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;;">-- 可以看到 ROWNUM 是有值得 从1开始</span></div></div><div align="left" style="min-height: 10pt;margin-left:80px;"><div><span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">select</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">ROWNUM</span></span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">,</span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">STU</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">.*</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">from</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">student  stu</span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">;</span></span></div></div><div align="left" style="min-height: 10pt;margin-left:80px;"><div><span style="font-size: 10pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;;">-- 查询 ROWNUM =1 是可以找到数据的</span></div></div><div align="left" style="min-height: 10pt;margin-left:80px;"><div><span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">select</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">*</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">from</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">student stu</span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">where</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">ROWNUM</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">=</span></span> <span style="font-size: 10pt; color: rgb(255, 128, 0); font-family: &quot;Courier New&quot;;">1</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">;</span></span></div></div><div align="left" style="min-height: 10pt;margin-left:80px;"><div><span style="font-size: 10pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;;">-- 查询  ROWNUM =2 是找不到数的因为目前只查出来了一条数据</span></div></div><div align="left" style="min-height: 10pt;margin-left:80px;"><div><span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">select</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">*</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">from</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">student stu</span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">where</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">ROWNUM</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">=</span></span> <span style="font-size: 10pt; color: rgb(255, 128, 0); font-family: &quot;Courier New&quot;;">2</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">;</span></span></div></div><div align="left" style="min-height: 10pt;"><div style="margin-left:80px;"><span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">select</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">ROWNUM</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">,</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">ACC</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">.*</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">from</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">ADMIN02</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">.</span></span><span style="font-size: 10pt; color: rgb(128, 128, 128); font-family: &quot;Courier New&quot;;">&quot;ACCOUNT&quot;</span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">  acc</span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">where</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">rownum</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">&gt;</span></span> <span style="font-size: 10pt; color: rgb(255, 128, 0); font-family: &quot;Courier New&quot;;">1</span></div></div><div><br/></div><div>       --</div><div>         1 这句话查不到结果</div><div>         2 只有有结果记录时，ROWNUM才有相应数据，而且是逐次递加的。</div><div>         3 当查询到第一条记录时，该记录的ROWNUM为1，但条件要求ROWNUM&gt;1，因此不符合，继续查询下一条；</div><div>           因为前面没有符合要求的记录，因此下一条记录过来后，其ROWNUM还是为1，如此循环，就不会产生结果。</div><div><br/></div><div>    eg4 ： 可以查询 &lt;,&lt;= 或 =1</div><div align="left" style="min-height: 10pt;"><div style="margin-left:40px;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span><span style="font-size: 10pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;;">-- 取第一条数据</span></div></div><div align="left" style="min-height: 10pt;margin-left:40px;"><div><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">  </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">select</span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">*</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">from</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">ADMIN02</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">.</span></span><span style="font-size: 10pt; color: rgb(128, 128, 128); font-family: &quot;Courier New&quot;;">&quot;ACCOUNT&quot;</span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">where</span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">rownum</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">=</span></span><span style="font-size: 10pt; color: rgb(255, 128, 0); font-family: &quot;Courier New&quot;;">1</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">;</span></span></div></div><div align="left" style="min-height: 10pt;margin-left:40px;"><div><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span><span style="font-size: 10pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;;">-- 取前六条数据</span></div></div><div align="left" style="min-height: 10pt;"><div style="margin-left:40px;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">  </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">select</span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">*</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">from</span></span> <span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">ADMIN02</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">.</span></span><span style="font-size: 10pt; color: rgb(128, 128, 128); font-family: &quot;Courier New&quot;;">&quot;ACCOUNT&quot;</span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">where</span></span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;"> </span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">rownum</span></span> <span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">&lt;=</span></span><span style="font-size: 10pt; color: rgb(255, 128, 0); font-family: &quot;Courier New&quot;;">6</span><span style="font-size:10pt"><span style="color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-size: 10pt; font-weight: bold;">;</span></span></div></div><div><br/></div><div><br/></div><div>   eg5 通过 rownum 做分页</div><div>              SELECT *</div><div>              FROM (SELECT T.*, ROWNUM RN</div><div>                      FROM (SELECT * FROM EMP ORDER BY EMPNO DESC) T</div><div>                     WHERE ROWNUM &lt;= ( (currentPage-1) * pageSize + pageSize )) --每页显示几条</div><div>             WHERE RN &gt; ( (currentPage-1) * pageSize ); --当前页数</div><div><br/></div><div>                 说明</div><div>                -- 5 = (currentPage-1) * pageSize + pageSize   每页显示几条</div><div>                -- 0 = (currentPage-1) * pageSize              当前页数</div><div>                SELECT *</div><div>                  FROM (SELECT T.*, ROWNUM RN</div><div>                          FROM (SELECT * FROM EMP ORDER BY EMPNO DESC) T</div><div>                         WHERE ROWNUM &lt;= 5)</div><div>                 WHERE RN &gt; 0;   </div><div><br/></div><div>                实例</div><div>                  -- 第一页 1</div><div>                    select *</div><div>                      from ( SELECT T.*, ROWNUM RN</div><div>                              FROM (SELECT * FROM ADMIN02.&quot;ACCOUNT&quot; ORDER BY accid asc) T</div><div>                             WHERE ROWNUM &lt;= 5 )</div><div>                    where rn &gt;0 </div><div><br/></div><div>                    -- 第二页 2</div><div><br/></div><div>                    select *</div><div>                      from ( SELECT T.*, ROWNUM RN</div><div>                              FROM (SELECT * FROM ADMIN02.&quot;ACCOUNT&quot; ORDER BY accid asc) T</div><div>                             WHERE ROWNUM &lt;= 15 )</div><div>                    where rn &gt;10     </div></span>
</div></body></html> 